;/*FB_PKG_DELIM*/

__d("MAWRestoreMessagesFromEncryptedBackupsNOP",["I64","LSDataTraceCheckPoint","LSIntEnum","MAWBridgeTraceRecordCheckpointHandler","MAWBridgeUpdateClientRestoreStatus","MAWChatJid","MAWEncryptedBackupsUpdateGlobalRestoreStatus","MAWJobDefinitions","MAWTTRC","MAWTimedJob","MAWUpdateClientRestoreStatusOperationType","Promise","ReQL","WAJobOrchestratorTypes","WALoggerDeferred","asyncToGeneratorRuntime","cr:4992","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Failed to get thread key for "," when calling restoreMessagesFromEncryptedBackup"]);i=function(){return a};return a}function j(a,b){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){try{c=(yield d("MAWChatJid").toThreadKeyMaybe(a,c));if(c!=null){a=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.table("messages_ranges_v2__generated")).getKeyRange(c)));if(a!=null)return a.minMessageId}}catch(a){return(h||(h=b("Promise"))).reject(a)}return});return k.apply(this,arguments)}function l(a,b,c){if(b===0){d("MAWTTRC").startMAWTTRCFlow();d("MAWTTRC").markEvent("eb_restore_start");c&&d("MAWTTRC").markEvent("eb_prefetch_start");return d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.table("mi_act_mapping_table"))).then(function(a){a.forEach(function(a){a=d("MAWJobDefinitions").toThreadJidPrimaryId(d("I64").to_string(a.jid));d("MAWEncryptedBackupsUpdateGlobalRestoreStatus").addThreadIdToStatusArray(a,"restore");c&&d("MAWEncryptedBackupsUpdateGlobalRestoreStatus").addThreadIdToStatusArray(a,"ebprefetch")})})}}function a(a,b,c,d,e,f,g,h,i,j,k,l){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,k,m,n,o,p,q,r,s){var t=b("cr:4992")!=null&&r==null&&f!=null,u=d("MAWEncryptedBackupsUpdateGlobalRestoreStatus").getCurrentGlobalRestoreStatusArrayLength("restore");yield l(a,u,t);try{u=(yield j(a,f));if(t&&b("cr:4992")!=null){t={action:d("MAWUpdateClientRestoreStatusOperationType").upsertClientRestoreStatus,threadId:f};yield d("MAWBridgeUpdateClientRestoreStatus").call(a,t);yield b("cr:4992")(a,e,f,g,k,m,n,o,p,q,r,u,s)}else{t=(yield d("MAWChatJid").toThreadKeyMaybe(a,f));t==null&&void d("WALoggerDeferred").ERROR(i(),f);c("promiseDone")(d("MAWTimedJob").TimedUIJobStarters.fireAndForget(d("MAWJobDefinitions").jobSerializers.restoreMessagesFromEncryptedBackups(e,f,g,k,n,p,(m=u)!=null?m:void 0,(o=q)!=null?o:void 0,(t=r)!=null?t:void 0,void 0,void 0,s,{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION})))}}catch(e){if(q!=null)return d("MAWBridgeTraceRecordCheckpointHandler").call(a,{checkPointId:d("LSIntEnum").ofNumber(c("LSDataTraceCheckPoint").FLOW_END_FOR_FAILURE),dataTraceId:q,errorMessage:e,shouldFlush:!0,syncChannel:-1,tags:void 0}).then(function(){return(h||(h=b("Promise"))).reject(e)})}return(h||(h=b("Promise"))).resolve([[],[],!0])});return m.apply(this,arguments)}g.call=a}),98);
__d("IntlCLDRNumberType12",["IntlVariations"],(function(a,b,c,d,e,f,g){"use strict";a={getVariation:function(a){if(a%10===1&&a%100!==11)return c("IntlVariations").NUMBER_ONE;else return c("IntlVariations").NUMBER_OTHER}};b=a;g["default"]=b}),98);